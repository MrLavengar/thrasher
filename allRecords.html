
<!------ Include the above in your HEAD tag ---------->

<!DOCTYPE html>
<html>
<head>





<!--Bootsrap 4 CDN-->




<!--Custom styles-->
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script>

<!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
<script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-analytics.js"></script>

<!-- Add Firebase products that you want to use -->
<script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-firestore.js"></script>

<link rel="stylesheet" href="./style/main.css">
<link rel="stylesheet" type="text/css" href="./style/profile.css">

<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Data Tables</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
  integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
  integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
  integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

<script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
</head>


<body>

  <script src="firebaseConfig.js"></script>
  <script src="app.js"></script>






  <div class="topnav" id="myTopnav">
		<a href="main.html" class="active">Home</a>
		<a href="barcode-scanner.html">Scanner</a>
		<a href="profileInfo.html">Settings</a>
		<a href="records.html">Records</a>
        <a href="about.html">About</a>
        <a href="loggedOut.html" id='logout'>Logout</a>
		<a href="javascript:void(0);" class="icon" onclick="myFunction()">
		  <i class="fa fa-bars"></i>
		</a>
	  </div>

<h3 style="text-align: center;">
    All Records
</h3>


        <div class="container">
          <table class="table table-fluid" id="myTable">
            <thead>
              <tr>
                <th>Photo</th>
                <th>Name</th>
                <th>Container</th>
              </tr>
            </thead>
            <tbody id="recordsBody">
    
            </tbody>
          </table>
        </div>
        
      </div>
    </div>



    <script>





      var firestore = firebase.firestore();
      window.setTimeout(getDatas, 2000);//add this line for timer with ur function for load datas


      function fillTable() {
        console.log("startuje");

        firestore.collection('products').get().then((snapshot) => {
          snapshot.docs.forEach(doc => {
            renderRecordsList(doc);
          })
        }).then(function () {
          console.log("All record have been loaded");
        }).catch(function (error) {
          console.log("got an error: ", error);
        });
      }

      // output.innerText="";


      const recordsList = document.querySelector('#myTable');
      const recordsBody = document.querySelector('#recordsBody');
      let currentUser = firebase.auth().currentUser;
      if (currentUser != null) {
        currentUserID = currentUser.uid;
      }
      console.log(recordsList);
      function renderRecordsList(doc) {

        // if (  currentUserID !== doc.data().userID ) {        
        let tr = document.createElement('tr');
        let td_wastePhoto = document.createElement('td');
        let td_name = document.createElement('td');
        let td_wasteContainer = document.createElement('td');
        let td_buttons = document.createElement('td');
        let td_img = document.createElement("img");
        let td_img2 = document.createElement("img");
        let removal = document.createElement("button");
        let edit = document.createElement("button");


        tr.style.width = '10%';
        td_img.style.height = '100px';
        td_img.style.width = '100px';



        tr.setAttribute('data-id', doc.id);
        td_name.textContent = doc.data().name;
        td_wasteContainer.src = doc.data().binURL;
        // td_wasteContainer.innerHTML += "<section> <span class= 'trash'> <span></span> <i></i></span> </section>";
        td_img.src = doc.data().photoURL;
        td_img2.src = doc.data().binURL;
        td_wasteContainer.appendChild(td_img2);
        td_wastePhoto.appendChild(td_img);
        td_buttons.appendChild(removal);
        // td_buttons.appendChild(edit);
        // td_buttons.style.height="200px";git
        td_wastePhoto.className = "clickablePhoto";


        tr.appendChild(td_wastePhoto);
        tr.appendChild(td_name);
        tr.appendChild(td_wasteContainer);
        //tr.appendChild(td_buttons);


        recordsBody.appendChild(tr);

      }

      //}



      window.addEventListener("load", function () {
        fillTable();
      })

      function getDatas() {
        $('#myTable').DataTable();

      }


     

    jQuery(document).ready(function($) {
      $(".clickablePhoto").click(function() {
          window.location = $(this).data("rated.html");
      });
  })









    </script>


</body>

</html>