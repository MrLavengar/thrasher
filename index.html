<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<!DOCTYPE html>
<html>
<head>
	<title>Login Page</title>
   <!--Made with love by Mutiullah Samim -->
   <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<!--Bootsrap 4 CDN-->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
    <!--Fontawesome CDN-->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

	<!--Custom styles-->
    <link rel="stylesheet" type="text/css"  href="style/index.css">
    
	<link rel="manifest" href="./manifest.json">
	<link rel="canonical" href="https://mrlavengar.github.io/thrasher/" />
</head>
<body>
<div class="container">
	<div class="d-flex justify-content-center h-100">
		<div class="card">
			<div class="card-header">
				<h3>Sign In</h3>
				<div class="d-flex justify-content-end social_icon">
					<span id ="signInWithFacebook"><i class="fab fa-facebook-square"></i></span>
					<span id="signInWithGoogle"><i class="fab fa-google-plus-square"></i></span>
					<!-- <span id="signInWithTwitter"><i class="fab fa-twitter-square"></i></span> -->
				</div>
			</div>
			<div class="card-body">
				<form>
					<div class="input-group form-group">
						<div class="input-group-prepend">
							<span class="input-group-text"><i class="fas fa-user"></i></span>
						</div>
						<input id ="email" type="text" class="form-control" placeholder="username">	
					</div>
					<div class="input-group form-group">
						<div class="input-group-prepend">
							<span class="input-group-text"><i class="fas fa-key"></i></span>
						</div>
						<input id="password"type="password" class="form-control" placeholder="password">
					</div>

					<div class="form-group">
                        <!-- dodalem do inputa onclick="location.href='main.html'" i zmieniłem typa z submit na button-->
						<input id="signIn" type="button"  value="Login" class="btn float-right login_btn">
					</div>

					<!--<div class="form-group">
                         dodalem do inputa onclick="location.href='main.html'" i zmieniłem typa z submit na button
						<input id="signInWithMail" type="button" onclick="location.href='main.html';" value="Login" class="btn float-right login_btn">
					</div> -->
				</form>
			</div>
			<div class="card-footer">
				<div class="d-flex justify-content-center links ">
					Don't have an account?<a href="./signup.html">Sign Up</a>
				</div>
				<!-- <div class="d-flex justify-content-center">
					<a href="#">Forgot your password?</a>
				</div>
				</div d-flex justify-content-center>
				<button id="logout">Logout</button> -->
			</div>
		</div>
	</div>
</div>

<script src="app.js"></script>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<!-- <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script> -->

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

<!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

<!---->  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script>

  <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-analytics.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-firestore.js"></script>
  <script src="firebaseConfig.js"></script> 
<script>
  // Your web app's Firebase configuration



  const emailField = document.getElementById('email');
const passwordField = document.getElementById('password');
const signInWithMail = document.getElementById('signIn');
const signInWithGoogleBtn = document.getElementById('signInWithGoogle');
// const signInWithTwitterBtn = document.getElementById('signInWithTwitter');
const signInWithFacebookBtn = document.getElementById('signInWithFacebook');
//const signUp = document.getElementById('signUp');
const logOut = document.getElementById('logout');


//Sign in function
const signInWithEmailFunction = () => {
  const email = emailField.value;
  const password = passwordField.value;

  //Built in firebase function responsible for authentication
  auth.signInWithEmailAndPassword(email, password)
  .then(() => {
    location.href='main.html';
  })
  .catch(error => {
    console.error(error);
  })
}

const signInWithGoogle = () => {
    const googleProvider = new firebase.auth.GoogleAuthProvider();
  
    auth.signInWithPopup(googleProvider)
    .then(() => {
		location.href='main.html';
      console.log('You\'re now signed in !');
    })
    .catch(error => {
      console.error(error);
    });
  }

const signInWithFacebook = () => {
    const facebookProvider = new firebase.auth.FacebookAuthProvider();
    
    auth.signInWithPopup(facebookProvider)
    .then(() => {
	location.href='main.html';
    console.log('Signed in successfully !');
    })
    .catch(error => {
    console.error(error);
    });
}
/* won't work, I won't receieve access to Twitter account for developers on time
const signInWithTwitter = () => {
    const twitterProvider = new firebase.auth.TwitterAuthProvider();
    //Or auth.signInWithRedirect(twitterProvider)
    auth.signInWithPopup(twitterProvider)
    .then(() => {
      console.log('Signed in successfully !');
    })
    .catch(error => {
      console.error(error);
    });
  }
  */

  auth.onAuthStateChanged(user => {
    console.log(user);
    
    if(user.displayName)
        console.log(user.displayName);
  });
  
  /*logOut.addEventListener('click', () => {
    auth.signOut()
    .then(() => {
        console.log('User signed out successfully !');
    })
    .catch(error => {
        console.error(error);
    });
  })
  */




const sendVerificationEmail = () => {
    //Built in firebase function responsible for sending the verification email
    auth.currentUser.sendEmailVerification()
    .then(() => {
        console.log('Verification Email Sent Successfully !');
    })
    .catch(error => {
        console.error(error);
    });
}


  
signInWithGoogleBtn.addEventListener('click', signInWithGoogle);

signInWithMail.addEventListener('click', signInWithEmailFunction);

signInWithFacebookBtn.addEventListener('click', signInWithFacebook);

// signInWithTwitterBtn.addEventListener('click', signInWithTwitter);




 
</script>

</body>
</html>